
{% extends 'base.html' %}

{% block title %}Gestion des modèles d'impression{% endblock %}

{% block content %}
<div class="container">
    <h2 class="mb-4">Gestion des modèles d'impression</h2>
    
    <div class="card">
        <div class="card-body">
            <form method="POST" action="{{ url_for('update_print_template', template_id=templates[0].id) }}">
                <div class="mb-3">
                    <label class="form-label">Logo URL</label>
                    <input type="url" name="logo_url" class="form-control" value="{{ templates[0].logo_url or '' }}" placeholder="https://example.com/logo.png">
                    <small class="form-text text-muted">URL de votre logo (format recommandé: PNG, 200x100px)</small>
                </div>
                
                <div class="mb-3">
                    <label class="form-label">En-tête HTML</label>
                    <textarea name="header_html" class="form-control" rows="4" placeholder="<div class='header'><img src='${logo_url}' alt='Logo'/><h1>${table.display_name}</h1></div>">{{ templates[0].header_html }}</textarea>
                    <small class="form-text text-muted">Variables disponibles: ${logo_url}, ${table.display_name}</small>
                </div>
                
                <div class="mb-3">
                    <label class="form-label">Pied de page HTML</label>
                    <textarea name="footer_html" class="form-control" rows="4" placeholder="<div class='footer'>Imprimé le ${date} - Page ${page}</div>">{{ templates[0].footer_html }}</textarea>
                    <small class="form-text text-muted">Variables disponibles: ${date}, ${page}</small>
                </div>
                
                <div class="mb-3">
                    <label class="form-label">CSS personnalisé</label>
                    <textarea name="css" class="form-control" rows="12">{{ templates[0].css or '''
@page {
    margin: 1cm;
}
.header {
    text-align: center;
    margin-bottom: 20px;
    border-bottom: 1px solid #ccc;
    padding-bottom: 10px;
}
.header img {
    max-height: 60px;
    margin-bottom: 10px;
}
.record-title {
    font-size: 24px;
    margin-bottom: 20px;
    color: #333;
}
.field-group {
    margin-bottom: 15px;
}
.field-label {
    font-weight: bold;
    color: #666;
}
.field-value {
    margin-top: 5px;
    padding: 8px;
    background: #f9f9f9;
    border-radius: 4px;
}
.footer {
    text-align: center;
    margin-top: 30px;
    padding-top: 10px;
    border-top: 1px solid #ccc;
    font-size: 12px;
    color: #666;
}''' }}</textarea>
                    <small class="form-text text-muted">CSS pour personnaliser l'apparence du document imprimé</small>
                </div>
                
                <button type="submit" class="btn btn-primary">Enregistrer</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}
